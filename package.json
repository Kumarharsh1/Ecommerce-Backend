# Create a fresh, updated package.json
$updatedPackageJson = @{
  name = "backend"
  version = "1.0.0"
  description = "MERN E-commerce Backend"
  main = "server.js"
  scripts = @{
    start = "node server.js"
    dev = "nodemon server.js"
    test = "echo 'No tests specified'"
    "deploy-check" = "node scripts/deploy-check.js"
  }
  engines = @{
    node = ">=18.0.0"
    npm = ">=8.0.0"
  }
  dependencies = @{
    express = "^4.18.2"
    mongoose = "^8.0.3"
    dotenv = "^16.3.1"
    bcryptjs = "^2.4.3"
    jsonwebtoken = "^9.0.2"
    multer = "^2.0.0"  # Updated to latest version
    cors = "^2.8.5"
  }
  devDependencies = @{
    nodemon = "^3.0.1"
  }
}

# Save the updated package.json
$updatedPackageJson | ConvertTo-Json -Depth 10 | Set-Content -Path "backend/package.json"

Write-Host "âœ… Created updated package.json with correct multer version" -ForegroundColor Green
